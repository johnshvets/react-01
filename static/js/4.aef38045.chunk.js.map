{"version":3,"sources":["hoc/WithAuthRedirect.jsx","components/common/Paginator/Paginator.module.css","components/common/Paginator/Paginator.tsx","components/Users/User.jsx","components/Users/Users.tsx","redux/users-selector.ts","components/Users/UsersContainer.tsx"],"names":["mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","Paginator","totalItemCount","pageSize","currentPage","onPageChange","portionSize","pageCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","onClick","filter","page","map","index","key","className","classes","selectedPage","User","user","followingInProgress","unfollow","follow","id","src","photos","small","userPic","width","followed","disabled","some","name","status","Users","totalUserCount","users","getStateUsers","usersPage","getPageSize","getTotalUserCount","getCurrentPage","getIsFetching","isFetching","getFollowingInProgress","UsersContainer","pageNumber","getUsers","compose"],"mappings":"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","file":"static/js/4.aef38045.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst mapStateToProps = (state) => ({ isAuth: state.auth.isAuth });\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n  class RedirectComponent extends React.Component {\r\n    render() {\r\n      if (!this.props.isAuth) return <Redirect to={\"/login\"} />;\r\n\r\n      return <Component {...this.props} />;\r\n    }\r\n  }\r\n\r\n  const ConnectAuthRedirectComponent = connect(mapStateToProps)(\r\n    RedirectComponent\r\n  );\r\n\r\n  return ConnectAuthRedirectComponent;\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Paginator_page__W1zAS\",\"selectedPage\":\"Paginator_selectedPage__2Iy9z\"};","import React, { useState } from \"react\";\r\nimport classes from \"./Paginator.module.css\";\r\n\r\ntype PropsType = {\r\n  totalItemCount: number;\r\n  pageSize: number;\r\n  currentPage: number;\r\n  onPageChange: (pageNumber: number) => void;\r\n  portionSize?: number;\r\n};\r\n\r\nconst Paginator: React.FC<PropsType> = ({\r\n  totalItemCount,\r\n  pageSize,\r\n  currentPage,\r\n  onPageChange,\r\n  portionSize = 5,\r\n}) => {\r\n  const pageCount = Math.ceil(totalItemCount / pageSize);\r\n\r\n  const pages: Array<number> = [];\r\n\r\n  for (let i = 1; i <= pageCount; i += 1) {\r\n    pages.push(i);\r\n  }\r\n\r\n  const portionCount = Math.ceil(pageCount / portionSize);\r\n  const [portionNumber, setPortionNumber] = useState(1);\r\n  const leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n  const rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n  return (\r\n    <div>\r\n      {portionNumber > 1 && (\r\n        <button onClick={() => setPortionNumber(portionNumber - 1)}>\r\n          Prev\r\n        </button>\r\n      )}\r\n      {pages\r\n        .filter(\r\n          (page) =>\r\n            page >= leftPortionPageNumber && page <= rightPortionPageNumber\r\n        )\r\n        .map((page, index) => {\r\n          return (\r\n            <a\r\n              key={index}\r\n              className={`${classes.page} ${\r\n                currentPage === page && classes.selectedPage\r\n              }`}\r\n              onClick={() => onPageChange(page)}\r\n            >\r\n              {page}\r\n            </a>\r\n          );\r\n        })}\r\n      {portionCount > portionNumber && (\r\n        <button onClick={() => setPortionNumber(portionNumber + 1)}>\r\n          Next\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Paginator;\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport userPic from \"../../images/user.svg\";\r\n\r\nconst User = ({ user, followingInProgress, unfollow, follow }) => {\r\n  return (\r\n    <div>\r\n      <div>\r\n        <NavLink to={`/profile/${user.id}`}>\r\n          <img\r\n            src={user.photos.small !== null ? user.photos.small : userPic}\r\n            width=\"64px\"\r\n          />\r\n        </NavLink>\r\n        {user.followed ? (\r\n          <button\r\n            disabled={followingInProgress.some((id) => id === user.id)}\r\n            onClick={() => unfollow(user.id)}\r\n          >\r\n            Unfollow\r\n          </button>\r\n        ) : (\r\n          <button\r\n            disabled={followingInProgress.some((id) => id === user.id)}\r\n            onClick={() => follow(user.id)}\r\n          >\r\n            Follow\r\n          </button>\r\n        )}\r\n      </div>\r\n      <div>\r\n        <h2>{user.name}</h2>\r\n        <p>{user.status}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import React from \"react\";\r\nimport { UsersType } from \"../../types/types\";\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\nimport User from \"./User\";\r\n\r\ntype PropsType = {\r\n  totalUserCount: number;\r\n  pageSize: number;\r\n  currentPage: number;\r\n  onPageChange: (pageNumber: number) => void;\r\n  users: Array<UsersType>;\r\n  followingInProgress: Array<number>;\r\n  unfollow: (userId: number) => void;\r\n  follow: (userId: number) => void;\r\n};\r\n\r\nconst Users: React.FC<PropsType> = ({\r\n  totalUserCount,\r\n  pageSize,\r\n  currentPage,\r\n  onPageChange,\r\n  users,\r\n  followingInProgress,\r\n  unfollow,\r\n  follow,\r\n}) => {\r\n  return (\r\n    <main>\r\n      <Paginator\r\n        totalItemCount={totalUserCount}\r\n        pageSize={pageSize}\r\n        currentPage={currentPage}\r\n        onPageChange={onPageChange}\r\n      />\r\n      {users.map((user) => (\r\n        <User\r\n          key={user.id}\r\n          user={user}\r\n          followingInProgress={followingInProgress}\r\n          unfollow={unfollow}\r\n          follow={follow}\r\n        />\r\n      ))}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n","import { AppStateType } from \"./redux-store\";\r\n\r\nexport const getStateUsers = (state: AppStateType) => {\r\n  return state.usersPage.users;\r\n};\r\n\r\nexport const getPageSize = (state: AppStateType) => {\r\n  return state.usersPage.pageSize;\r\n};\r\n\r\nexport const getTotalUserCount = (state: AppStateType) => {\r\n  return state.usersPage.totalUserCount;\r\n};\r\n\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n  return state.usersPage.currentPage;\r\n};\r\n\r\nexport const getIsFetching = (state: AppStateType) => {\r\n  return state.usersPage.isFetching;\r\n};\r\n\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n  return state.usersPage.followingInProgress;\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { follow, unfollow, getUsers } from \"../../redux/users-reducer\";\r\nimport Users from \"./Users\";\r\nimport Loader from \"../common/loader\";\r\nimport { compose } from \"redux\";\r\nimport { withAuthRedirect } from \"../../hoc/WithAuthRedirect\";\r\nimport {\r\n  getCurrentPage,\r\n  getFollowingInProgress,\r\n  getIsFetching,\r\n  getPageSize,\r\n  getStateUsers,\r\n  getTotalUserCount,\r\n} from \"../../redux/users-selector\";\r\nimport { UsersType } from \"../../types/types\";\r\nimport { AppStateType } from \"../../redux/redux-store\";\r\n\r\ntype MapStatePropsType = {\r\n  isFetching: boolean;\r\n  currentPage: number;\r\n  pageSize: number;\r\n  totalUserCount: number;\r\n  users: Array<UsersType>;\r\n  followingInProgress: Array<number>;\r\n};\r\n\r\ntype MapDispatchPropsType = {\r\n  unfollow: (userId: number) => void;\r\n  follow: (userId: number) => void;\r\n  getUsers: (currentPage: number, pageSize: number) => void;\r\n};\r\n\r\ntype PropsType = MapStatePropsType & MapDispatchPropsType;\r\n\r\nclass UsersContainer extends React.Component<PropsType> {\r\n  componentDidMount() {\r\n    const { getUsers, currentPage, pageSize } = this.props;\r\n\r\n    getUsers(currentPage, pageSize);\r\n  }\r\n\r\n  onPageChange = (pageNumber: number) => {\r\n    const { getUsers, pageSize } = this.props;\r\n\r\n    getUsers(pageNumber, pageSize);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.props.isFetching ? <Loader /> : null}\r\n        <Users\r\n          totalUserCount={this.props.totalUserCount}\r\n          pageSize={this.props.pageSize}\r\n          currentPage={this.props.currentPage}\r\n          onPageChange={this.onPageChange}\r\n          users={this.props.users}\r\n          follow={this.props.follow}\r\n          unfollow={this.props.unfollow}\r\n          followingInProgress={this.props.followingInProgress}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => ({\r\n  users: getStateUsers(state),\r\n  pageSize: getPageSize(state),\r\n  totalUserCount: getTotalUserCount(state),\r\n  currentPage: getCurrentPage(state),\r\n  isFetching: getIsFetching(state),\r\n  followingInProgress: getFollowingInProgress(state),\r\n});\r\n\r\nexport default compose(\r\n  connect<MapStatePropsType, MapDispatchPropsType, AppStateType>(\r\n    mapStateToProps,\r\n    {\r\n      follow,\r\n      unfollow,\r\n      getUsers,\r\n    }\r\n  ),\r\n  withAuthRedirect\r\n)(UsersContainer);\r\n"],"sourceRoot":""}